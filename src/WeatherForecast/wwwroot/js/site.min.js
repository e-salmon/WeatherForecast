const autoRefreshInterval=30;document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("forecastData"))var n=new Vue({el:"#forecastData",created:function(){this.updateForecast();this.startPolling()},beforeDestroy:function(){clearInterval(this.polling)},methods:{startPolling:function(){let n=this;this.polling=setInterval(function(){n.countdown--;n.countdown<=0?n.updateForecast():n.progress=(100-n.countdown*100/autoRefreshInterval).toString()+"%"},1e3)},updateForecast:async function(){this.isRefreshing=!0;try{const n=await fetch("/forecast-update");if(n.ok){const t=await n.json();console.debug(t);this.weatherData=t;this.hasData=!0;this.countdown=autoRefreshInterval;this.progress="0%"}}finally{this.isRefreshing=!1}}},data:{polling:undefined,countdown:0,progress:"0%",isRefreshing:!1,hasData:!1,weatherData:undefined}})});