function updateForecast(){$("#btnRefresh i").addClass("fa-spin");$.get("/forecast-update",function(n){$("#forecastContent").html(n);countdown=autoRefreshInterval}).fail(function(){console.log(arguments)}).always(function(){$("#btnRefresh i").removeClass("fa-spin")})}const autoRefreshInterval=30;let countdown=autoRefreshInterval;$(function(){$("#forecastContent").length&&(updateForecast(),setInterval(function(){countdown--;countdown<=0?updateForecast():$("#autoRefresh").css("width",(100-countdown*100/autoRefreshInterval).toString()+"%")},1e3));$("#btnRefresh").on("click",function(){updateForecast()})});